;/*FB_PKG_DELIM*/

__d("MWChatUnavailableComposer.react",["fbt","ComponentMountUnmountSubspanLogger.react","MWBlockedComposerLogging","MWXComposerBanner.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e=a.reason;a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,e);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"This person is unavailable on Messenger."),b[0]=a):a=b[0];e=a;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsxs("div",{children:[j.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MWChatUnavailableComposer"}),j.jsx(c("MWXComposerBanner.react"),{bodyText:e})]}),b[1]=a):a=b[1];return a}g["default"]=a}),226);
__d("MWV2OpenComposer.react",["FBLogger","I64","LSAuthorityLevel","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MWGenAIUtils","MWPActor.react","MWPReplyContext.react","MWPUseVoiceRecorder","MWV2ComposerEditContainer.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","MessengerMSplitFlag","MessengerWebGenAIConsentStatus","MessengerWebGenAIConsentStatusStore","ReQL","WebUXLoggingSurfaceContextProvider","emptyFunction","gkx","promiseDone","qex","react","react-compiler-runtime","requireDeferred","useAsyncReStore","useMAWEditMessageData","useMWGenAIWriteConsentMutation","useMWMediaManager","useMWOnTypingStateChanged","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler","useMWV2OnSendOpenMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useContext,m=b.useRef,n=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2OpenComposer.react"),o=c("gkx")("23426"),p=c("qex")._("4742");function q(){n.onReady(function(a){return a.logClickStartRecording()})}function r(){n.onReady(function(a){return a.logBrowserDenyAccess()})}function s(a){var b=d("react-compiler-runtime").c(15),e=a.afterSendMessage,g=a.thread,h=c("useAsyncReStore")(),k=d("MWPActor.react").useActor();b[0]!==k||b[1]!==e||b[2]!==h||b[3]!==g.authorityLevel||b[4]!==g.threadKey||b[5]!==g.threadType?(a=function(){c("gkx")("10223")&&d("MWPActor.react").isAPPlus()&&d("LSMessagingThreadTypeUtil").isOneToOne(g.threadType)&&(i||(i=d("I64"))).lt(g.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&c("promiseDone")(h,async function(a){var b;b=await (b=d("ReQL")).firstAsync(b.leftJoin(b.fromTableAscending(a.tables.participants).getKeyRange(g.threadKey).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,k)}),b.fromTableAscending(a.tables.contacts)));var e=b==null?void 0:b[1];if(!e){c("FBLogger")("messenger_web_product").warn("contact not found");return}if((j||(j=d("LSIntEnum"))).equal(e.contactReachabilityStatusType,c("LSContactReachabilityStatusType").AP_PLUS_MESSAGING_REACHABLE_TEXT_ONLY_AND_BANNER))return a.runInTransaction(function(a){return a.contacts.put(babelHelpers.extends({},e,{contactReachabilityStatusType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").AP_PLUS_MESSAGING_UNREACHABLE_BLOCK_COMPOSER)}))},"readwrite",void 0,void 0,f.id+":149")}),e()},b[0]=k,b[1]=e,b[2]=h,b[3]=g.authorityLevel,b[4]=g.threadKey,b[5]=g.threadType,b[6]=a):a=b[6];var l;b[7]!==a||b[8]!==g?(l={afterSendMessage:a,skipUrlPreviewGen:!1,thread:g},b[7]=a,b[8]=g,b[9]=l):l=b[9];var n=c("useMWV2OnSendOpenMessage")(l),o=m(!1);b[10]===Symbol.for("react.memo_cache_sentinel")?(a=c("MessengerWebGenAIConsentStatusStore").getChatConsented(),b[10]=a):a=b[10];var p=m(a);l=c("useMWGenAIWriteConsentMutation")();var q=l[0];b[11]!==q||b[12]!==n||b[13]!==g.threadKey?(a=function(a,b,e,f,h,i,j,k,l,m,r,s,t,u,v,w,x,y){d("MWGenAIUtils").isMetaAIThread(g.threadKey)&&!p.current&&(c("MessengerWebGenAIConsentStatus").nux_scope==="EU"||c("MessengerWebGenAIConsentStatus").nux_scope==="EU_V2")&&q({metadata:{consent_source:"MW_CHAT_WEB",nux_scope:c("MessengerWebGenAIConsentStatus").nux_scope},onSuccess:function(){p.current=!0}});x=n(a,b,e,f,h,i,j,k,l,m,r,s,t,u,v,w,d("MWGenAIUtils").getGenAIAssistantDataclassParams({isSubsequentSend:o.current,threadKey:g.threadKey}),y);o.current=!0;return x},b[11]=q,b[12]=n,b[13]=g.threadKey,b[14]=a):a=b[14];return a}function a(a){var b=d("react-compiler-runtime").c(37),e=a.afterSendMessage,f=a.isPreviewThread;a=a.thread;e=e===void 0?c("emptyFunction"):e;var g=l(d("MWPReplyContext.react").MWPReplyContext);g=g.reply;var h=c("useMAWEditMessageData")(),i;b[0]!==a?(i={thread:a},b[0]=a,b[1]=i):i=b[1];i=c("useMWMediaManager")(i);var j=i.handleFileRemove,m=i.handleFileSelect,n=i.mediaStaging;i=i.onHdMediaToggled;var t;b[2]!==e||b[3]!==a?(t={afterSendMessage:e,thread:a},b[2]=e,b[3]=a,b[4]=t):t=b[4];e=s(t);b[5]===Symbol.for("react.memo_cache_sentinel")?(t={logBrowserDenyAccess:r,logClickStartRecording:q,maxDuration:void 0},b[5]=t):t=b[5];t=d("MWPUseVoiceRecorder").useVoiceRecorder(t);var u=c("useMWOnTypingStateChanged")(a);c("useMWV2FileDropzoneRegisterHandler")(m);var v;b[6]!==a?(v=d("LSMessagingThreadTypeUtil").isAiBotSummoning(a),b[6]=a,b[7]=v):v=b[7];v=v;var w;b[8]!==f||b[9]!==n||b[10]!==e||b[11]!==u||b[12]!==a.threadKey?(w={composerEntrypointForLogging:"MWV2OpenComposer",isPreviewThread:f,mediaStaging:n,onSendMessage:e,onTypingStateChanged:u,threadKey:a.threadKey},b[8]=f,b[9]=n,b[10]=e,b[11]=u,b[12]=a.threadKey,b[13]=w):w=b[13];f=c("useMWPComposerEditor")(w);u=f.editor;w=f.editorElementRef;var x=f.hasStuffToSend;f=f.sendMessage;var y;b[14]!==g||b[15]!==a?(y=g!=null?k.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:g.messageId,messageThreadKey:g.threadKey,messageTimestamp:g.timestampMs,thread:a}):null,b[14]=g,b[15]=a,b[16]=y):y=b[16];b[17]!==h?(g=h!=null&&k.jsx(c("MWV2ComposerEditContainer.react"),{editMessageData:h}),b[17]=h,b[18]=g):g=b[18];var z;b[19]!==h||b[20]!==u||b[21]!==w||b[22]!==x||b[23]!==v||b[24]!==n||b[25]!==j||b[26]!==m||b[27]!==i||b[28]!==e||b[29]!==f||b[30]!==a||b[31]!==t?(z=h!=null?null:k.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:u,editorElementRef:w,hasStuffToSend:x,isAiBotMentionsEnabled:v&&o&&!c("MessengerMSplitFlag").is_msplit_account,isEmojiMentionsEnabled:p===!0,mediaStaging:n,onAttachmentRemoved:j,onAttachmentsAdded:m,onHdMediaToggled:i,onSendMessage:e,policyProduct:"messaging_lightswitch",sendMessage:f,supportedFileTypes:void 0,surface:"mwp_mwv2_composer",thread:a,voiceRecorder:t}),b[19]=h,b[20]=u,b[21]=w,b[22]=x,b[23]=v,b[24]=n,b[25]=j,b[26]=m,b[27]=i,b[28]=e,b[29]=f,b[30]=a,b[31]=t,b[32]=z):z=b[32];b[33]!==y||b[34]!==g||b[35]!==z?(h=k.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"open_composer",children:k.jsxs("div",{children:[y,g,z]})}),b[33]=y,b[34]=g,b[35]=z,b[36]=h):h=b[36];return h}g.default=a}),98);
__d("useMWAppealableMessageSendComposerBlockConfiguration",["fbt","MWCallingRestrictionDialog.entrypoint","MWCallingRestrictionLogger","MWXComposerBanner.react","MWXLink.react","react","react-compiler-runtime","useMWHasAppealableMessageSendFeatureLimit","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;b.useMemo;function a(){var a=d("react-compiler-runtime").c(12),b=c("useMWHasAppealableMessageSendFeatureLimit")(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={},a[0]=e):e=a[0];e=c("useMWXEntryPointDialog")(c("MWCallingRestrictionDialog.entrypoint"),e);var f=e[0];e=d("MWCallingRestrictionLogger").useLogComposerBlockImpression();var g;a[1]!==f?(g=function(){f({trigger:"message_thread"})},a[1]=f,a[2]=g):g=a[2];g=g;var i;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"How to confirm"),a[3]=i):i=a[3];a[4]!==g?(i={label:i,onPress:g,size:32,type:"secondary"},a[4]=g,a[5]=i):i=a[5];g=i;i=g;if(b()){e();a[6]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Certain actions have been restricted due to unusual activity. {=m2}",[h._implicitParam("=m2",j.jsx(c("MWXLink.react"),{href:"https://www.facebook.com/help/1053588012132894",style:{color:"var(--blue-link)"},target:"_blank",children:h._(/*BTDS*/"Learn more")}))]),a[6]=g):g=a[6];a[7]!==i?(b=[i],a[7]=i,a[8]=b):b=a[8];a[9]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"Confirm your identity to send messages"),a[9]=e):e=a[9];a[10]!==b?(i=j.jsx(c("MWXComposerBanner.react"),{bodyText:g,buttons:b,headerText:e,testid:void 0}),a[10]=b,a[11]=i):i=a[11];return i}}g["default"]=a}),226);
__d("MWXComposerGlimmer.react",["MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={block:{paddingBottom:"x1l90r2v",$$css:!0},container:{alignSelf:"xkh2ocl",backgroundColor:"x57kliw",borderTopColor:"x1epquy7",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},glimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(4);a=a.ref;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[j.container,j.block],b[0]=e):e=b[0];var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(c("MWXColumnItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmer})}),b[1]=f):f=b[1];b[2]!==a?(e=i.jsx(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,ref:a,spacing:20,xstyle:e,children:f}),b[2]=a,b[3]=e):e=b[3];return e}g["default"]=a}),98);
__d("useMWComposerGlimmerOnDraftLoadingState",["Int64Hooks","MWFetchPersistedDraftUtils","MWInitialDraftMessageContext.react","MWXComposerGlimmer.react","gkx","promiseDone","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=d("MWInitialDraftMessageContext.react").useMWInitialDraftMessage(),f=e==null?void 0:e.setInitialDraftState,g,h;b[0]!==f||b[1]!==a.threadKey||b[2]!==a.threadType?(g=function(){if(f==null)return;c("gkx")("16991")?c("promiseDone")(d("MWFetchPersistedDraftUtils").loadDraftMessage(a.threadKey,a.threadType,!0).then(function(a){f(a!=null?a:"")})["catch"](function(){f("")})):f("")},h=[a.threadKey,a.threadType,f],b[0]=f,b[1]=a.threadKey,b[2]=a.threadType,b[3]=g,b[4]=h):(g=b[3],h=b[4]);d("Int64Hooks").useEffectInt64(g,h);b[5]!==(e==null?void 0:e.initialDraftState.loading)?(g=e!=null&&e.initialDraftState.loading?i.jsx(c("MWXComposerGlimmer.react"),{}):void 0,b[5]=e==null?void 0:e.initialDraftState.loading,b[6]=g):g=b[6];return g}g["default"]=a}),98);
__d("useCometSubscribeMessengerHasDefaultThreadOneToOneCapability",["FBLogger","LSContactBitOffset","LSMessagingThreadTypeUtil","MAWDefaultE2eeOneToOneEligibility","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(27),g=(h||(h=c("useReStore")))(),j;e[0]!==g.tables._user_info?(j=function(){return d("ReQL").fromTableAscending(g.tables._user_info).map(i)},e[0]=g.tables._user_info,e[1]=j):j=e[1];var k;e[2]!==g?(k=[g],e[2]=g,e[3]=k):k=e[3];var l=d("ReQLSuspense").useFirst(j,k,f.id+":38");e[4]!==g.tables.contacts||e[5]!==l?(j=function(){return l!=null?d("ReQL").fromTableAscending(g.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(l):d("ReQL").empty()},e[4]=g.tables.contacts,e[5]=l,e[6]=j):j=e[6];e[7]!==g||e[8]!==l?(k=[g,l],e[7]=g,e[8]=l,e[9]=k):k=e[9];j=d("ReQLSuspense").useFirst(j,k,f.id+":43");k=j!=null&&d("LSContactBitOffset").has(80,j);var m;e[10]!==g.tables.contacts||e[11]!==a||e[12]!==b?(m=function(){return a!=null&&b!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)?d("ReQL").fromTableAscending(g.tables.contacts,[].concat(d("LSContactBitOffset").contactCapabilityFields,["id"])).getKeyRange(a):d("ReQL").empty()},e[10]=g.tables.contacts,e[11]=a,e[12]=b,e[13]=m):m=e[13];var n;e[14]!==g||e[15]!==a||e[16]!==b?(n=[g,a,b],e[14]=g,e[15]=a,e[16]=b,e[17]=n):n=e[17];m=d("ReQLSuspense").useFirst(m,n,f.id+":62");e[18]!==m?(n=d("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:m}),e[18]=m,e[19]=n):n=e[19];n=n;if(b==null||!d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)){var o;e[20]===Symbol["for"]("react.memo_cache_sentinel")?(o=[!1,!0,null],e[20]=o):o=e[20];return o}if(j==null){c("FBLogger")("messenger_web").info("Viewer is null when checking default e2ee thread capability");e[21]===Symbol["for"]("react.memo_cache_sentinel")?(o=[!1,!1,null],e[21]=o):o=e[21];return o}if(!k){n&&c("FBLogger")("messenger_web").warn("Viewer has no DEFAULT_E2EE_THREADS capability but other participant has DEFAULT_E2EE_THREAD_ONE_TO_ONE");e[22]===Symbol["for"]("react.memo_cache_sentinel")?(j=[!1,!0,null],e[22]=j):j=e[22];return j}if(m==null){e[23]===Symbol["for"]("react.memo_cache_sentinel")?(o=[!1,!1,null],e[23]=o):o=e[23];return o}e[24]!==n||e[25]!==m.id?(k=[n,!0,m.id],e[24]=n,e[25]=m.id,e[26]=k):k=e[26];return k}function i(a){return a.facebookUserId}g["default"]=a}),98);
__d("useIsDefaultE2eeOpenThread",["LSMessagingThreadTypeUtil","react-compiler-runtime","useCometSubscribeMessengerHasDefaultThreadOneToOneCapability"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(3),e=c("useCometSubscribeMessengerHasDefaultThreadOneToOneCapability")(a.threadKey,a.threadType);e=e[0];var f;b[0]!==e||b[1]!==a.threadType?(f=d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&e,b[0]=e,b[1]=a.threadType,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("useMWDefaultE2eeComposerConfiguration",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSThreadAttributionStore","lazyLoadComponent","react","react-compiler-runtime","useIsDefaultE2eeOpenThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h.useEffect,m=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDefaultE2eeThreadBlockedComposer.react").__setRef("useMWDefaultE2eeComposerConfiguration"));function a(a){var b=d("react-compiler-runtime").c(6),e=c("useIsDefaultE2eeOpenThread")(a),f,g;b[0]!==e||b[1]!==a.threadKey?(f=function(){if(e){var b=d("LSThreadAttributionStore").getSourceWithoutReset(void 0,(i||(i=d("I64"))).to_string(a.threadKey));b=b.type==="MWLSEntrypoint"?b.value:(j||(j=d("LSIntEnum"))).toNumber(b.value);c("FBLogger")("messenger_web").info("Default e2ee composer block showing up from non-meteora with entrypoint %s",b)}},g=[a.threadKey,e],b[0]=e,b[1]=a.threadKey,b[2]=f,b[3]=g):(f=b[2],g=b[3]);l(f,g);if(e){b[4]!==a?(f=k.jsx(m,{thread:a}),b[4]=a,b[5]=f):f=b[5];return f}}g["default"]=a}),98);
__d("useMWMetaAIBlockingComposerConfiguration",["fbt","MWGenAINuxQplLogger","MWGenAIUtils","MWXComposerBanner.react","MXGenAINuxTextContent.react","MessengerWebGenAIConsentStatus","MessengerWebGenAIConsentStatusStore","react","react-compiler-runtime","useMWGenAIWriteConsentMutation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useMemo;var k=b.useState;function a(a){var b=d("react-compiler-runtime").c(7),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("MessengerWebGenAIConsentStatusStore").getChatConsented(),b[0]=e):e=b[0];e=k(e);var f=e[0],g=e[1];e=c("useMWGenAIWriteConsentMutation")();var i=e[0];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"OK"),b[1]=e):e=b[1];b[2]!==i?(e={label:e,onPress:function(){i({metadata:{consent_source:"MW_CHAT_WEB",nux_scope:c("MessengerWebGenAIConsentStatus").nux_scope}}),g(!0),d("MWGenAINuxQplLogger").logNuxHidden("BR_UK")},size:32,type:"primary"},b[2]=i,b[3]=e):e=b[3];e=e;e=e;if(!d("MWGenAIUtils").isMetaAIThread(a.threadKey))return;if(!f&&c("MessengerWebGenAIConsentStatus").nux_scope==="BR_UK"){d("MWGenAINuxQplLogger").logNuxRender("BR_UK");b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("MXGenAINuxTextContent.react"),{formattedText:c("MessengerWebGenAIConsentStatus").inline_disclosure_text}),b[4]=a):a=b[4];b[5]!==e?(f=j.jsx(c("MWXComposerBanner.react"),{bodyText:a,buttons:[e]}),b[5]=e,b[6]=f):f=b[6];return f}}g["default"]=a}),226);
__d("getMWPUnavailableComposerConfiguration",["I64","LSAuthorityLevel","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWChatUnavailableComposer.react","MWXComposerGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a,b,e){if(d("LSMessagingThreadTypeUtil").isOneToOne(b)&&e!=null){b=!e.isPage&&(!e.hasMessageCapability||!e.hasReplyMessageCapability);if(e.blockedSinceTimestampMs==null&&b)return(i||(i=d("I64"))).lt(e.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))?j.jsx(c("MWXComposerGlimmer.react"),{}):j.jsx(c("MWChatUnavailableComposer.react"),{reason:e.hasMessageCapability?d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_REPLY:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_MESSAGE,thread:{threadKey:a}})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPReQLUnavailableComposerConfiguration",["I64","LSContactBitOffset","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","getMWPUnavailableComposerConfiguration","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;k||d("react");function a(a){var b=d("react-compiler-runtime").c(16),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),k;b[0]!==g||b[1]!==a.threadKey?(k=(i||(i=d("I64"))).equal(g,a.threadKey),b[0]=g,b[1]=a.threadKey,b[2]=k):k=b[2];var m=k,n;b[3]!==g||b[4]!==e||b[5]!==m||b[6]!==a.threadKey||b[7]!==a.threadType?(k=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a=a[1];return m||!(i||(i=d("I64"))).equal(a.id,g)}).map(l):d("ReQL").empty()},n=[e,a.threadKey,a.threadType,g,m],b[3]=g,b[4]=e,b[5]=m,b[6]=a.threadKey,b[7]=a.threadType,b[8]=k,b[9]=n):(k=b[8],n=b[9]);k=d("ReQLSuspense").useFirst(k,n,f.id+":33");if(k==null)return;n=k==null?void 0:k.authorityLevel;var o=k==null?void 0:k.blockedSinceTimestampMs,p;b[10]!==k||b[11]!==n||b[12]!==o||b[13]!==a.threadKey||b[14]!==a.threadType?(p=c("getMWPUnavailableComposerConfiguration")(a.threadKey,a.threadType,{authorityLevel:n,blockedSinceTimestampMs:o,hasMessageCapability:d("LSContactBitOffset").has(0,k),hasReplyMessageCapability:d("LSContactBitOffset").has(1,k),isPage:(i||(i=d("I64"))).equal(k.contactType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))}),b[10]=k,b[11]=n,b[12]=o,b[13]=a.threadKey,b[14]=a.threadType,b[15]=p):p=b[15];return p}function l(a){a=a[1];return a}g["default"]=a}),98);
__d("useMWCutoverComposerConfiguration",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","lazyLoadComponent","react","react-compiler-runtime","useMAWCanThreadBeCutoverOnDemand"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),l=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWOnDemandCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),m=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDualThreadCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration"));function a(a,b,e,f,g,h){var n=d("react-compiler-runtime").c(17),o=j(!1),p=o[0];o=o[1];var q=c("useMAWCanThreadBeCutoverOnDemand")(a);if((h||g||q||p)&&(!d("LSMessagingThreadTypeUtil").isOneToOne(b)||e!=null))if(f){n[0]!==a||n[1]!==b?(h={threadKey:a,threadType:b},n[0]=a,n[1]=b,n[2]=h):h=n[2];n[3]!==e||n[4]!==h?(g=i.jsx(m,{otherUser:e,thread:h}),n[3]=e,n[4]=h,n[5]=g):g=n[5];return g}else if(q||p){n[6]!==a?(f={threadKey:a},n[6]=a,n[7]=f):f=n[7];n[8]!==p||n[9]!==f?(h=i.jsx(l,{isODCutoverNavigationInProgress:p,reason:d("MWBlockedComposerLogging").ComposerBlockingReason.ON_DEMAND_CUTOVER,setIsODCutoverNavigationInProgress:o,thread:f}),n[8]=p,n[9]=f,n[10]=h):h=n[10];return h}else{g=e!=null?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_THREAD_ALREADY_CUTOVER:d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_GROUP_THREAD_CUTOVER;n[11]!==a||n[12]!==b?(q={threadKey:a,threadType:b},n[11]=a,n[12]=b,n[13]=q):q=n[13];n[14]!==g||n[15]!==q?(o=i.jsx(k,{reason:g,thread:q}),n[14]=g,n[15]=q,n[16]=o):o=n[16];return o}}g["default"]=a}),98);
__d("useMWReQLCutoverComposerConfiguration",["LSContactBitOffset","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWCutoverComposerConfiguration","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.contacts||b[1]!==a.threadKey||b[2]!==a.threadType?(g=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a.threadKey):d("ReQL").empty()},b[0]=e.tables.contacts,b[1]=a.threadKey,b[2]=a.threadType,b[3]=g):g=b[3];var i;b[4]!==e||b[5]!==a?(i=[e,a],b[4]=e,b[5]=a,b[6]=i):i=b[6];g=d("ReQLSuspense").useFirst(g,i,f.id+":33");i=((i=(i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated).getKeyRange(a.threadKey)},[e,a.threadKey],f.id+":44"))==null?void 0:i.minMessageId)!=null?i:"")==="";var j;b[7]!==g?(j=g!=null&&d("LSContactBitOffset").has(76,g),b[7]=g,b[8]=j):j=b[8];b=j;j=b&&i;b=d("MAWThreadCutover").useIsCutoverOpenThread(a.threadKey)||d("LSThreadBitOffset").has(128,a);i=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a.threadKey);return c("useMWCutoverComposerConfiguration")(a.threadKey,a.threadType,g,i,b,j)}g["default"]=a}),98);
__d("useMWReQLMessageRequestBlockedComposerConfiguration",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWSecureComposerUtils","MWPActor.react","MWReQLMessageRequestComposerBanner.react","MessageRequestsLog","MessengerWebUXLogger","ReQL","ReQLSuspense","cr:3912","gkx","react","react-compiler-runtime","useMWLSAcceptMessageRequest","useMessageRequestDeleteConversation","useMessageRequestLeaveGroup","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));k.useMemo;var m=b("cr:3912")==null?function(a,b){return!1}:b("cr:3912").isOneOnOneMessageRequestV2,n=b("cr:3912")==null?function(a){return!1}:b("cr:3912").isGroupMessageRequest,o=c("gkx")("7387");function a(a){var b=d("react-compiler-runtime").c(32),e=(h||(h=c("useReStore")))(),g=c("useMessageRequestLeaveGroup")(a.threadKey),k=a.threadType,p=c("useMessageRequestDeleteConversation")(a),q;b[0]!==k?(q=d("LSMessagingThreadTypeUtil").isArmadilloSecure(k),b[0]=k,b[1]=q):q=b[1];var r=q,s=c("useMWLSAcceptMessageRequest")(a.threadKey);q=!r&&d("LSThreadBitOffset").has(21,a);var t=d("MWPActor.react").useActor(),u,v;b[2]!==t||b[3]!==e.tables.contacts||b[4]!==e.tables.participants||b[5]!==a.threadKey||b[6]!==k?(u=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(k)||(i||(i=d("I64"))).equal(k,(j||(j=d("LSIntEnum"))).ofNumber(5))?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a=a[1];return!(i||(i=d("I64"))).equal(a.id,t)}):d("ReQL").empty()},v=[a.threadKey,k,e.tables.participants,e.tables.contacts,t],b[2]=t,b[3]=e.tables.contacts,b[4]=e.tables.participants,b[5]=a.threadKey,b[6]=k,b[7]=u,b[8]=v):(u=b[7],v=b[8]);var w=d("ReQLSuspense").useFirst(u,v,f.id+":67");bb0:{if(r){u=m(a,w)||o&&n(a);break bb0}u=!1}v=u;b[9]!==k?(u=d("LSMessagingThreadTypeUtil").isGroup(k),b[9]=k,b[10]=u):u=b[10];var x=u;b[11]!==e||b[12]!==w||b[13]!==a?(u=function(){w!=null&&d("MAWSecureComposerUtils").onDeleteThread(e,a,w[1].id)},b[11]=e,b[12]=w,b[13]=a,b[14]=u):u=b[14];u=u;var y=c("MessengerWebUXLogger").useInteractionLogger();if((v||q)&&c("gkx")("1545")){b[15]!==s||b[16]!==y||b[17]!==a?(v=function(){d("MessageRequestsLog").logActionConfirmed(a,1),y==null||y({eventName:"accept_chat_request",threadKey:a.threadKey,threadType:a.threadType}),s()},b[15]=s,b[16]=y,b[17]=a,b[18]=v):v=b[18];q=r?u:p;b[19]!==x||b[20]!==r||b[21]!==g||b[22]!==y||b[23]!==a?(u=function(){if(!r&&x){d("MessageRequestsLog").logActionConfirmed(a,10);y==null||y({eventName:"leave_group",threadKey:a.threadKey,threadType:a.threadType});return g()}},b[19]=x,b[20]=r,b[21]=g,b[22]=y,b[23]=a,b[24]=u):u=b[24];p=w==null?void 0:w[1];var z;b[25]!==x||b[26]!==v||b[27]!==q||b[28]!==u||b[29]!==p||b[30]!==a?(z=l.jsx(c("MWReQLMessageRequestComposerBanner.react"),{isGroup:x,onAccept:v,onDeleteConversation:q,onLeaveGroup:u,otherUserContact:p,thread:a}),b[25]=x,b[26]=v,b[27]=q,b[28]=u,b[29]=p,b[30]=a,b[31]=z):z=b[31];return z}}g["default"]=a}),98);
__d("MWComposerGating.react",["LSMessagingThreadTypeUtil","MWPComposerGating.react","MWV2OpenComposer.react","cr:9773","emptyFunction","react","react-compiler-runtime","useMAWEditMessageData","useMWAppealableMessageSendComposerBlockConfiguration","useMWComposerGlimmerOnDraftLoadingState","useMWDefaultE2eeComposerConfiguration","useMWMetaAIBlockingComposerConfiguration","useMWPBlockedComposerConfiguration","useMWPDisablePageComposerConfiguration","useMWPReQLFeatureLimitsBlockedComposerConfiguration","useMWPReQLNullComposerConfiguration","useMWPReQLUnavailableComposerConfiguration","useMWPRestrictedComposerConfiguration","useMWReQLCutoverComposerConfiguration","useMWReQLMessageRequestBlockedComposerConfiguration"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.memo;function k(a){var b=d("react-compiler-runtime").c(13),e=c("useMWPReQLNullComposerConfiguration")(a),f=c("useMWPDisablePageComposerConfiguration")(a),g=c("useMWPReQLFeatureLimitsBlockedComposerConfiguration")(a),h=c("useMWReQLCutoverComposerConfiguration")(a),i=c("useMWPBlockedComposerConfiguration")(a),j=c("useMWPRestrictedComposerConfiguration")(a),k=c("useMWPReQLUnavailableComposerConfiguration")(a),l=c("useMWDefaultE2eeComposerConfiguration")(a),m=c("useMWReQLMessageRequestBlockedComposerConfiguration")(a),n=c("useMWAppealableMessageSendComposerBlockConfiguration")(),o=c("useMWMetaAIBlockingComposerConfiguration")(a);a=c("useMWComposerGlimmerOnDraftLoadingState")(a);var p;b[0]!==e||b[1]!==f||b[2]!==o||b[3]!==a||b[4]!==g||b[5]!==h||b[6]!==i||b[7]!==j||b[8]!==k||b[9]!==l||b[10]!==m||b[11]!==n?(p=[e,f,g,h,i,j,k,l,m,n,o,a],b[0]=e,b[1]=f,b[2]=o,b[3]=a,b[4]=g,b[5]=h,b[6]=i,b[7]=j,b[8]=k,b[9]=l,b[10]=m,b[11]=n,b[12]=p):p=b[12];return p}function a(a){var e=d("react-compiler-runtime").c(8),f=a.afterSendMessage,g=a.isPreviewThread;a=a.thread;var h=c("useMAWEditMessageData")();h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(h!=null?h.threadType:a.threadType);if(b("cr:9773")!=null&&h){e[0]!==f||e[1]!==g||e[2]!==a?(h=i.jsx(b("cr:9773"),{afterSendMessage:f,isPreviewThread:g,thread:a}),e[0]=f,e[1]=g,e[2]=a,e[3]=h):h=e[3];return h}else{e[4]!==f||e[5]!==g||e[6]!==a?(h=i.jsx(c("MWV2OpenComposer.react"),{afterSendMessage:f,isPreviewThread:g,thread:a}),e[4]=f,e[5]=g,e[6]=a,e[7]=h):h=e[7];return h}}var l=j(a);function e(a){var b=d("react-compiler-runtime").c(8),e=a.afterSendMessage,f=a.isPreviewThread,g=a.thread,h=e===void 0?c("emptyFunction"):e;a=k(g);b[0]!==h||b[1]!==f||b[2]!==g?(e=function(){return i.jsx(l,{afterSendMessage:h,isPreviewThread:f,thread:g})},b[0]=h,b[1]=f,b[2]=g,b[3]=e):e=b[3];var j;b[4]!==a||b[5]!==e||b[6]!==g?(j=i.jsx(c("MWPComposerGating.react"),{configurations:a,isMessengerInbox:!1,renderComposer:e,thread:g}),b[4]=a,b[5]=e,b[6]=g,b[7]=j):j=b[7];return j}function f(a){var b=d("react-compiler-runtime").c(8),e=a.afterSendMessage,f=a.isPreviewThread,g=a.thread;a=k(g);var h;b[0]!==e||b[1]!==f||b[2]!==g?(h=function(){return i.jsx(l,{afterSendMessage:e,isPreviewThread:f,thread:g})},b[0]=e,b[1]=f,b[2]=g,b[3]=h):h=b[3];var j;b[4]!==a||b[5]!==h||b[6]!==g?(j=i.jsx(c("MWPComposerGating.react"),{configurations:a,isMessengerInbox:!0,renderComposer:h,thread:g}),b[4]=a,b[5]=h,b[6]=g,b[7]=j):j=b[7];return j}g.MWChatComposerGating=e;g.MWInboxComposerGating=f}),98);