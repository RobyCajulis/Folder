;/*FB_PKG_DELIM*/

__d("LSUpdateMessageSearchQueryStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(70).put({query:a[0],type_:a[1],threadKeyV2:a[5]==null?b.i64.cast([0,0]):a[5],status:a[2],hasNextPage:a[3],nextPageCursor:a[4],resultCount:a[6]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSSearchUpdateMessageSearchQueryStatusStoredProcedure";a.__tables__=["message_search_queries"];e.exports=a}),null);
__d("LSIssueMessageSearchQuery",["LSIssueNewTask","LSUpdateMessageSearchQueryStatus"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSUpdateMessageSearchQueryStatus"),a[0],a[1],c.i64.cast([0,1]),void 0,a[3],a[2],c.i64.cast([0,0]))},function(e){return d[0]=new c.Map(),d[0].set("query",a[0]),d[0].set("type",a[1]),d[0].set("thread_key",a[2]),d[0].set("next_page_cursor",a[3]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"message_search",c.i64.cast([0,107]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSSearchIssueMessageSearchQueryStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueMessageSearchQueryStoredProcedure",["LSIssueMessageSearchQuery","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueMessageSearchQuery"),e.query,e.type_,e.threadKey,e.nextPageCursor);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWMessageSearchFooter.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c={className:"x6s0dn4 x976wh6 x1ey2m1c x78zum5 xdt5ytf xz9dl7a xsag5q8 xf7dkkf xv54qhq x7wzq59"},b[0]=c):c=b[0];b[1]!==a?(c=i.jsx("div",babelHelpers["extends"]({},c,{children:a})),b[1]=a,b[2]=c):c=b[2];return c}g["default"]=a}),98);
__d("MWMessageSearchStatusTextItem.react",["MWMessageSearchFooter.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.children;a=a.height;a=a===void 0?"short":a;var f;b[0]!==a?(f={0:{},1:{className:"x1cnzs8 xx6bls6"}}[!!(a==="tall")<<0],b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=i.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:e}),b[2]=e,b[3]=a):a=b[3];b[4]!==f||b[5]!==a?(e=i.jsx(c("MWMessageSearchFooter.react"),{children:i.jsx("div",babelHelpers["extends"]({},f,{children:a}))}),b[4]=f,b[5]=a,b[6]=e):e=b[6];return e}g["default"]=a}),98);
__d("MWMessageSearchEBRestoreStatusOrUpsell.react",["fbt","CometErrorBoundary.react","CometPlaceholder.react","MWEBEntrypointsKillswitch.enum","MWMessageSearchFooter.react","MWMessageSearchStatusTextItem.react","MWMessageSearchStatusTypes","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useMWEBBackupState","useMWEBGetUpsellState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useEffect,l=c("deferredLoadComponent")(c("requireDeferred")("MWInboxMessageSearchEBRestoreUpsell.react").__setRef("MWMessageSearchEBRestoreStatusOrUpsell.react"));function m(a){var b=d("react-compiler-runtime").c(9),e=a.onEBOnboarded;a=a.status;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={entrypoint:c("MWEBEntrypointsKillswitch.enum").IN_THREAD_SEARCH},b[0]=f):f=b[0];var g=c("useMWEBBackupState")(f);f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;var i,m;b[1]!==g||b[2]!==e?(i=function(){g===3&&e()},m=[g,e],b[1]=g,b[2]=e,b[3]=i,b[4]=m):(i=b[3],m=b[4]);k(i,m);if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&g===4&&!f){b[5]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(c("MWMessageSearchFooter.react"),{children:j.jsx(l,{})})}),b[5]=i):i=b[5];return i}if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&g===2){b[6]===Symbol["for"]("react.memo_cache_sentinel")?(m=j.jsx(c("MWMessageSearchStatusTextItem.react"),{children:h._(/*BTDS*/"If you can't find the message you're looking for, try searching the Messenger mobile app.")}),b[6]=m):m=b[6];return m}if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS&&!a.hasSomeResults){b[7]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("MWMessageSearchStatusTextItem.react"),{height:"tall",children:h._(/*BTDS*/"Searching for messages...")}),b[7]=f):f=b[7];return f}if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS&&a.restoreStatus===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS){b[8]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWMessageSearchStatusTextItem.react"),{children:h._(/*BTDS*/"Restoring chat history. Keep the browser open until restoring is complete.")}),b[8]=i):i=b[8];return i}return null}function a(a){var b=d("react-compiler-runtime").c(3),e=a.onEBOnboarded;a=a.status;var f;b[0]!==e||b[1]!==a?(f=j.jsx(c("CometErrorBoundary.react"),{fallback:n,children:j.jsx(m,{onEBOnboarded:e,status:a})}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}function n(){return null}g["default"]=a}),226);
__d("MWMessageSearchInput.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusRegion.react","MWMessageSearchStatusTypes","MWPConversationSearchLogger","MWXCircleButton.react","MWXIconCross","MWXIconMagnifyingGlass","MWXIconStrict.react","MWXRoundedTextInput.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXTextImpl.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={textInput:{textOverflow:"xlyipyv",$$css:!0}};function l(a){return a>99?h._(/*BTDS*/"99+ results"):h._(/*BTDS*/"_j{\"*\":\"{totalResults} results\",\"_1\":\"1 result\"}",[h._plural(a,"totalResults")])}function a(a){var b=d("react-compiler-runtime").c(35),e=a.onEscape,f=a.query,g=a.resultCount,i=a.search,m=a.setQuery;a=a.status;var n;b[0]!==a.overallSearchStatus?(n=a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS?j.jsx(c("MWXSpinner.react"),{color:"blue",size:16}):null,b[0]=a.overallSearchStatus,b[1]=n):n=b[1];n=n;var o;b[2]!==g||b[3]!==a.overallSearchStatus?(o=g!=null&&g>0&&a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE?l(g):null,b[2]=g,b[3]=a.overallSearchStatus,b[4]=o):o=b[4];g=o;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a={key:c("CometKeys").ENTER},o=h._(/*BTDS*/"Search"),b[5]=a,b[6]=o):(a=b[5],o=b[6]);b[7]!==f||b[8]!==i?(a={command:a,description:o,handler:function(){f!==""&&(c("MWPConversationSearchLogger").logMessageSearchSearchClicked(),i())},triggerFromInputs:!0,triggerOnRepeats:!1},b[7]=f,b[8]=i,b[9]=a):a=b[9];var p;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(o={key:c("CometKeys").ESCAPE},p=h._(/*BTDS*/"Back"),b[10]=o,b[11]=p):(o=b[10],p=b[11]);b[12]!==e?(o={command:o,description:p,handler:e,triggerFromInputs:!0},b[12]=e,b[13]=o):o=b[13];b[14]!==a||b[15]!==o?(p=[a,o],b[14]=a,b[15]=o,b[16]=p):p=b[16];e=p;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5"},b[17]=a):a=b[17];b[18]!==n||b[19]!==f||b[20]!==g||b[21]!==m?(o=f!==""?j.jsxs(j.Fragment,{children:[j.jsxs("div",babelHelpers["extends"]({className:"x12bfo1c x4ii5y1 xr1yuqi x135b78x x11lfxj5 xp4054r xuxw1ft"},{children:[n,g!=null&&j.jsx(c("MWXTextImpl.react"),{testid:void 0,type:"meta3",children:g})]})),j.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWXIconCross"),label:h._(/*BTDS*/"Clear"),onPress:function(){return m("")},size:32})]}):null,b[18]=n,b[19]=f,b[20]=g,b[21]=m,b[22]=o):o=b[22];b[23]===Symbol["for"]("react.memo_cache_sentinel")?(p=j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconMagnifyingGlass"),size:20}),n=h._(/*BTDS*/"Search"),b[23]=p,b[24]=n):(p=b[23],n=b[24]);b[25]!==m?(g=function(a){a.target instanceof HTMLInputElement&&m(a.target.value)},b[25]=m,b[26]=g):g=b[26];var q;b[27]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Search in conversation"),b[27]=q):q=b[27];b[28]!==f||b[29]!==o||b[30]!==g?(p=j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(c("MWXRoundedTextInput.react"),{addOnEnd:o,icon:p,label:n,onChange:g,placeholder:q,value:f,xstyle:k.textInput})}),b[28]=f,b[29]=o,b[30]=g,b[31]=p):p=b[31];b[32]!==e||b[33]!==p?(n=j.jsx("div",babelHelpers["extends"]({},a,{children:j.jsx(c("MWXRow.react"),{expanding:!0,paddingTop:12,paddingVertical:8,verticalAlign:"center",children:j.jsx(c("MWXRowItem.react"),{expanding:!0,children:j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:e,children:p})})})})),b[32]=e,b[33]=p,b[34]=n):n=b[34];return n}g["default"]=a}),226);
__d("MWMessageSearchNullState.react",["fbt","MWMessageSearchStatusTextItem.react","MWMessageSearchStatusTypes","MWXColumn.react","MWXColumnItem.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.isSecureThread,f=a.query,g=a.queryInput,i=a.searchResults;a=a.status;var k;b[0]!==f||b[1]!==g.length||b[2]!==a.overallSearchStatus?(k=g.length>0&&f==null&&a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.NOT_STARTED?j.jsx(c("MWMessageSearchStatusTextItem.react"),{height:"tall",children:h._(/*BTDS*/"Press \"Enter\" to search.")}):null,b[0]=f,b[1]=g.length,b[2]=a.overallSearchStatus,b[3]=k):k=b[3];b[4]!==e||b[5]!==i||b[6]!==a.overallSearchStatus?(f=a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&i.length===0&&j.jsx("div",babelHelpers["extends"]({className:"x1p5oq8j xwxc41k x1mfogq2 xsfy40s"},{children:j.jsxs(c("MWXColumn.react"),{spacing:12,children:[j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:12,children:j.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._(/*BTDS*/"No results found")})}),!e&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:h._(/*BTDS*/"Try again with a different spelling or combination of terms. Complete words usually work best.")})})]})})),b[4]=e,b[5]=i,b[6]=a.overallSearchStatus,b[7]=f):f=b[7];b[8]!==k||b[9]!==f?(g=j.jsxs(j.Fragment,{children:[k,f]}),b[8]=k,b[9]=f,b[10]=g):g=b[10];return g}g["default"]=a}),226);
__d("useMWPConversatioSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;b.useMemo;var i={currentResultCount:0,firstResultShowUp:!1,hasStarted:!1,instanceKey:0};function a(){var a=d("react-compiler-runtime").c(3),b=n,e=m,f;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){i.hasStarted&&e();i.hasStarted=!0;i.instanceKey=i.instanceKey+1;i.firstResultShowUp=!1;i.currentResultCount=0;c("QPLUserFlow").start(c("qpl")._(25301522,"2409"),{annotations:a,instanceKey:i.instanceKey});return i.instanceKey},a[0]=f):f=a[0];f=f;var g=l,h;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a){if(i.firstResultShowUp)return;i.firstResultShowUp=!0;b({instanceKey:a,point:"first_result_show_up"})},a[1]=h):h=a[1];h=h;var o=k,p=j;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(p={getCurrentInstanceKey:p,qplAddAnnotations:c("emptyFunction"),qplAddPoint:b,qplCancel:e,qplMarkFirstResultShowUp:h,qplStart:f,qplSuccess:g,updateCurrentResultCount:o},a[2]=p):p=a[2];h=p;f=h;return f}function j(){return i.instanceKey}function k(a){i.currentResultCount=a}function l(a){if(!i.hasStarted)return;if(a!=null&&a!==i.instanceKey)return;i.hasStarted=!1;c("QPLUserFlow").endSuccess(c("qpl")._(25301522,"2409"),{annotations:{"int":{result_count:i.currentResultCount}},instanceKey:i.instanceKey})}function m(a){if(!i.hasStarted)return;if(a!=null&&a!==i.instanceKey)return;i.hasStarted=!1;c("QPLUserFlow").endCancel(c("qpl")._(25301522,"2409"),{annotations:{"int":{result_count:i.currentResultCount}},instanceKey:i.instanceKey})}function n(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!i.hasStarted)return;if(d!=null&&d!==i.instanceKey)return;c("QPLUserFlow").addPoint(c("qpl")._(25301522,"2409"),a,{data:b,instanceKey:i.instanceKey})}g["default"]=a}),98);
__d("useMWPConversationSearch",["I64","LSFactory","LSIntEnum","LSIssueMessageSearchQueryStoredProcedure","LSMessageSearchType","LSSearchRequestStatusType","MAWThreadCutover","MWPConversationSearchContext.react","MWPConversationSearchLogger","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","isMWNewSearchUXEnabled","nullthrows","promiseDone","react","react-compiler-runtime","useMWPConversatioSearchQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=i||d("react");b.useCallback;var l=b.useContext,m=b.useEffect;b.useMemo;var n=b.useRef,o=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE);function p(a,b){a=[a,b].filter(Boolean);b=a.filter(function(a){return(j||(j=d("LSIntEnum"))).toNumber(a.status)===c("LSSearchRequestStatusType").COMPLETE});return b.length===0||b.length<a.length?void 0:b.reduce(function(a,b){return a+(k||(k=d("I64"))).to_float(b.resultCount)},0)}function q(a,b){if(b==null)return a==null?void 0:a.status;if(a==null)return b==null?void 0:b.status;if((j||(j=d("LSIntEnum"))).toNumber(a.status)===c("LSSearchRequestStatusType").FAILED||(j||(j=d("LSIntEnum"))).toNumber(b.status)===c("LSSearchRequestStatusType").FAILED)return(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").FAILED);a=Math.min((j||(j=d("LSIntEnum"))).toNumber(a.status),j.toNumber(b.status));return j.ofNumber(a)}function r(a,b){c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(a),{nextPageCursor:b.nextPageCursor,query:b.query,threadKey:b.threadKeyV2,type_:o})},"readwrite",void 0,void 0,f.id+":94"))}function a(a){var b=d("react-compiler-runtime").c(84),e=l(d("MWPConversationSearchContext.react").context),g;b[0]!==e?(g=c("nullthrows")(e),b[0]=e,b[1]=g):g=b[1];e=g;var i=e.search,t=e.setSearch;g=c("useMWPConversatioSearchQPLLogger")();var u=g.qplCancel,v=g.qplMarkFirstResultShowUp,w=g.updateCurrentResultCount;e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var x=e.setVisibleMessage,y=(h||(h=c("useReStore")))(),z=d("MAWThreadCutover").useGetCutoverMapping(i==null?void 0:i.threadKey);b[2]!==y||b[3]!==i||b[4]!==a?(g=function(){return i!=null?d("ReQL").fromTableAscending(y.tables.message_search_queries).getKeyRange(o,i.query,a):d("ReQL").empty()},e=[y,i,a],b[2]=y,b[3]=i,b[4]=a,b[5]=g,b[6]=e):(g=b[5],e=b[6]);var A=d("ReQLSuspense").useFirst(g,e,f.id+":133");b[7]!==z||b[8]!==y||b[9]!==i?(g=function(){return i!=null&&z!=null&&z.showOpenMessageHistory===!0?d("ReQL").fromTableAscending(y.tables.message_search_queries).getKeyRange(o,i.query,z.openThreadId):d("ReQL").empty()},e=[y,i,z],b[7]=z,b[8]=y,b[9]=i,b[10]=g,b[11]=e):(g=b[10],e=b[11]);var B=d("ReQLSuspense").useFirst(g,e,f.id+":145"),C=i==null?void 0:i.query;b[12]!==u||b[13]!==i?(g=function(){i==null&&u()},e=[u,i],b[12]=u,b[13]=i,b[14]=g,b[15]=e):(g=b[14],e=b[15]);m(g,e);b[16]!==x?(g=function(a){x(function(b){return{contextLine:(b=a.contextLine)!=null?b:"",highlights:a.matchOffsets!=null&&a.matchLengths!=null?s(a.matchOffsets,a.matchLengths):[],messageId:a.messageId,messageOtid:a.messageOtid,source:"Search",timestamp:c("nullthrows")(a.messageTimestampMs)}})},b[16]=x,b[17]=g):g=b[17];var D=g;b[18]!==y||b[19]!==C||b[20]!==a?(e=function(){return C!=null?d("ReQL").fromTableAscending(y.tables.message_search_results).getKeyRange(o,C,a):d("ReQL").empty()},g=[y,C,a],b[18]=y,b[19]=C,b[20]=a,b[21]=g,b[22]=e):(g=b[21],e=b[22]);e=d("ReQLSuspense").useArray(e,g,f.id+":194");var E;b[23]!==z||b[24]!==y||b[25]!==C?(g=function(){return C!=null&&z!=null&&z.showOpenMessageHistory===!0?d("ReQL").fromTableAscending(y.tables.message_search_results).getKeyRange(o,C,z.openThreadId):d("ReQL").empty()},E=[y,C,z],b[23]=z,b[24]=y,b[25]=C,b[26]=g,b[27]=E):(g=b[26],E=b[27]);g=d("ReQLSuspense").useArray(g,E,f.id+":207");b[28]!==g||b[29]!==e?(E=[].concat(e,g),b[28]=g,b[29]=e,b[30]=E):E=b[30];g=E;var F=g;b[31]!==F.length||b[32]!==w?(e=function(){w(F.length)},b[31]=F.length,b[32]=w,b[33]=e):e=b[33];b[34]!==F||b[35]!==w?(E=[F,w],b[34]=F,b[35]=w,b[36]=E):E=b[36];m(e,E);var G=n(),H=i==null?void 0:i.selectedSearchResultIndex;b[37]!==F||b[38]!==D||b[39]!==v||b[40]!==H?(g=function(){if(F.length>0&&H!=null&&H<F.length){var a=F[H];G.current!==a&&(v(),c("isMWNewSearchUXEnabled")()||(c("MWPConversationSearchLogger").logMessageSearchMsgImpression(),D(a)),G.current=a)}},b[37]=F,b[38]=D,b[39]=v,b[40]=H,b[41]=g):g=b[41];b[42]!==F||b[43]!==D||b[44]!==v||b[45]!==H||b[46]!==x?(e=[D,F,H,x,v],b[42]=F,b[43]=D,b[44]=v,b[45]=H,b[46]=x,b[47]=e):e=b[47];m(g,e);b[48]!==D?(E=function(a){D(a)},b[48]=D,b[49]=E):E=b[49];g=E;b[50]!==F.length||b[51]!==y||b[52]!==B||b[53]!==A||b[54]!==i||b[55]!==H||b[56]!==t?(e=function(){if(i==null)return null;H===F.length-1&&(A==null?void 0:A.hasNextPage)===!0?r(y,A):H===F.length-1&&(B==null?void 0:B.hasNextPage)===!0&&r(y,B);t(babelHelpers["extends"]({},i,{selectedSearchResultIndex:i.selectedSearchResultIndex+1}));return i.selectedSearchResultIndex+1},b[50]=F.length,b[51]=y,b[52]=B,b[53]=A,b[54]=i,b[55]=H,b[56]=t,b[57]=e):e=b[57];E=e;b[58]!==i||b[59]!==t?(e=function(){if(i==null)return null;t(babelHelpers["extends"]({},i,{selectedSearchResultIndex:i.selectedSearchResultIndex-1}));return i.selectedSearchResultIndex-1},b[58]=i,b[59]=t,b[60]=e):e=b[60];e=e;var I;b[61]!==B||b[62]!==A?(I=q(A,B),b[61]=B,b[62]=A,b[63]=I):I=b[63];var J=I;I=(A==null?void 0:A.hasNextPage)===!0||(B==null?void 0:B.hasNextPage)===!0;var K;b[64]!==y||b[65]!==B||b[66]!==A||b[67]!==i||b[68]!==J?(K=function(){if(i==null||(k||(k=d("I64"))).equal(J!=null?J:(k||(k=d("I64"))).zero,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)))return;(A==null?void 0:A.hasNextPage)===!0?r(y,A):(B==null?void 0:B.hasNextPage)===!0&&r(y,B)},b[64]=y,b[65]=B,b[66]=A,b[67]=i,b[68]=J,b[69]=K):K=b[69];K=K;var L;b[70]!==B||b[71]!==A?(L=p(A,B),b[70]=B,b[71]=A,b[72]=L):L=b[72];L=L;var M=i==null?void 0:i.query,N;b[73]!==L||b[74]!==F||b[75]!==I||b[76]!==K||b[77]!==g||b[78]!==E||b[79]!==e||b[80]!==H||b[81]!==J||b[82]!==M?(N={hasMore:I,loadMore:K,navigateToResult:g,next:E,previous:e,query:M,resultCount:L,searchResults:F,selectedSearchResultIndex:H,status:J},b[73]=L,b[74]=F,b[75]=I,b[76]=K,b[77]=g,b[78]=E,b[79]=e,b[80]=H,b[81]=J,b[82]=M,b[83]=N):N=b[83];return N}function s(a,b){a=a.split(",");var c=b.split(",");return a.map(function(a,b){return{matchLength:parseInt(c[b],10),matchOffset:parseInt(a,10)}})}g["default"]=a}),98);
__d("MWInboxMessageSearchContext.react",["emptyFunction","react","react-compiler-runtime","useMWPConversationSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext,k=f({hasMore:void 0,loadMore:c("emptyFunction"),navigateToResult:c("emptyFunction"),next:c("emptyFunction"),previous:c("emptyFunction"),query:void 0,resultCount:void 0,searchResults:[],selectedSearchResultIndex:void 0,status:void 0});function a(a){var b=d("react-compiler-runtime").c(3),e=a.children;a=a.thread;a=c("useMWPConversationSearch")(a.threadKey);var f;b[0]!==e||b[1]!==a?(f=i.jsx(k.Provider,{value:a,children:e}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}function b(){return j(k)}g.MWInboxMessageSearchContext=a;g.useMWInboxMessageSearchContext=b}),98);
__d("MWMessageSearchMessageSnippet.react",["MWXMessageTextWithEntities.react","MWXTextImpl.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=function(a){return i.jsx(c("MWXTextImpl.react"),{color:"primary",type:"bodyLink4",children:a})};function a(a){var b=d("react-compiler-runtime").c(19);a=a.item;var e;if(b[0]!==a.contextLine||b[1]!==a.matchLengths||b[2]!==a.matchOffsets){var f,g;f=(f=(f=a.matchOffsets)==null?void 0:f.split(","))!=null?f:[];if(b[6]!==a.matchLengths){var h;h=(h=(h=a.matchLengths)==null?void 0:h.split(","))!=null?h:[];b[6]=a.matchLengths;b[7]=h}else h=b[7];var k=h;h=Number(f[0]);g=(g=(g=a.contextLine)==null?void 0:g.length)!=null?g:0;g=h+15>g;g=g?30:15;var l=Math.max(0,h-g);e=l>0;if(b[8]!==a.contextLine||b[9]!==l){h=(g=(h=a.contextLine)==null?void 0:h.slice(l,a.contextLine.length))!=null?g:"";b[8]=a.contextLine;b[9]=l;b[10]=h}else h=b[10];g=h;b[11]!==k||b[12]!==e||b[13]!==l?(h=function(a,b){return{entity:{__typename:"Bold"},length:Number(k[b]),offset:Number(a)-l+(e?3:0)}},b[11]=k,b[12]=e,b[13]=l,b[14]=h):h=b[14];f=f.map(h);b[0]=a.contextLine;b[1]=a.matchLengths;b[2]=a.matchOffsets;b[3]=e;b[4]=f;b[5]=g}else e=b[3],f=b[4],g=b[5];h=f;b[15]===Symbol["for"]("react.memo_cache_sentinel")?(a={Bold:[j]},b[15]=a):a=b[15];f=e?"..."+g:g;b[16]!==h||b[17]!==f?(g=i.jsx(c("MWXMessageTextWithEntities.react"),{ranges:h,renderers:a,text:f}),b[16]=h,b[17]=f,b[18]=g):g=b[18];return g}g["default"]=a}),98);
__d("MWMessageSearchResultItem.react",["BaseMiddot.react","FDSImageCover.react","FDSRelativeTimestamp.react","I64","MWInboxInfoPanelContext.react","MWInboxMessageSearchContext.react","MWInboxMessageSearchJumpToResultQPL","MWMessageSearchMessageSnippet.react","MWPConversationSearchLogger","MWPVisibleMessageContext.react","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWVerticalRhythm","MWXListCellPressable.react","MWXText.react","MWXTextImpl.react","cr:3702","react","react-compiler-runtime","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useContext;function a(a){var e=d("react-compiler-runtime").c(42),f=a.item,g=a.onSelect,h=a.position;a=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext();var l=a.navigateToResult;a=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();a=a.visibleMessage;var m=k(c("MWResponsiveLayoutContext.react")),n=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),o=n.setThreadInfoVisible;e[0]!==f?(n={onImpressionStart:function(){c("MWPConversationSearchLogger").logMessageSearchMsgImpression(f)}},e[0]=f,e[1]=n):n=e[1];n=c("useSinglePartialViewImpression")(n);var p=(a==null?void 0:a.messageId)!=null&&(a==null?void 0:a.messageId)===f.messageId||(a==null?void 0:a.messageOtid)!=null&&a.messageOtid===f.messageOtid;a=(a=f.profilePicUrl)!=null?a:f.secondaryProfilePicUrl;var q;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(q={borderRadius:"50%",height:32,width:32},e[2]=q):q=e[2];e[3]!==a?(q=j.jsx(c("FDSImageCover.react"),{alt:"",src:a,style:q}),e[3]=a,e[4]=q):q=e[4];a=q;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(q={className:"x1xegmmw x13fj5qh"},e[5]=q):q=e[5];var r;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"xwib8y2 x1y1aw1k"},e[6]=r):r=e[6];var s;e[7]!==f.displayName?(s=j.jsx(c("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:"headline4",children:f.displayName}),e[7]=f.displayName,e[8]=s):s=e[8];var t,u;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(t=j.jsx(c("MWVerticalRhythm"),{height:12}),u={className:"x6s0dn4 x78zum5 xeuugli"},e[9]=t,e[10]=u):(t=e[9],u=e[10]);var v;e[11]!==f?(v=j.jsx(c("MWXTextImpl.react"),{color:"secondary",numberOfLines:1,type:"body4",children:j.jsx(c("MWMessageSearchMessageSnippet.react"),{item:f})}),e[11]=f,e[12]=v):v=e[12];var w;e[13]===Symbol["for"]("react.memo_cache_sentinel")?(w={className:"x6s0dn4 x78zum5 xf159sx x135b78x xuxw1ft"},e[13]=w):w=e[13];var x,y;e[14]===Symbol["for"]("react.memo_cache_sentinel")?(x=j.jsx(c("MWXTextImpl.react"),{color:"secondary",numberOfLines:1,type:"body4",children:j.jsx(c("BaseMiddot.react"),{})}),y={className:"xyiysdx"},e[14]=x,e[15]=y):(x=e[14],y=e[15]);var z;e[16]!==f.messageTimestampMs?(z=new Date(f.messageTimestampMs!=null?(i||(i=d("I64"))).to_float(f.messageTimestampMs):0),e[16]=f.messageTimestampMs,e[17]=z):z=e[17];e[18]!==z?(w=j.jsxs("div",babelHelpers["extends"]({},w,{children:[x,j.jsx("div",babelHelpers["extends"]({},y,{children:j.jsx(c("MWXTextImpl.react"),{color:"secondary",type:"body4",children:j.jsx(c("FDSRelativeTimestamp.react"),{date:z,format:"minimized"})})}))]})),e[18]=z,e[19]=w):w=e[19];e[20]!==v||e[21]!==w?(x=j.jsxs("div",babelHelpers["extends"]({},u,{children:[v,w]})),e[20]=v,e[21]=w,e[22]=x):x=e[22];e[23]!==x||e[24]!==s?(y=j.jsxs("div",babelHelpers["extends"]({},r,{children:[s,t,x]})),e[23]=x,e[24]=s,e[25]=y):y=e[25];e[26]!==f||e[27]!==m||e[28]!==l||e[29]!==g||e[30]!==h||e[31]!==p||e[32]!==o?(z=function(a){(b("cr:3702")==null?void 0:b("cr:3702").getCardShowState(d("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,m))==="hidden"&&(m.pushCard(d("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL),o(!1)),!p&&(f.messageId!==null||f.messageOtid!==null)&&(d("MWInboxMessageSearchJumpToResultQPL").endCancelIfAny("user_selected_new_result"),d("MWInboxMessageSearchJumpToResultQPL").start(f.threadKey,{messageId:f.messageId,offlineThreadingId:f.messageOtid})),l(f),c("MWPConversationSearchLogger").logMessageSearchMsgResultChosen(null,h,f),g==null||g()},e[26]=f,e[27]=m,e[28]=l,e[29]=g,e[30]=h,e[31]=p,e[32]=o,e[33]=z):z=e[33];e[34]!==a||e[35]!==p||e[36]!==y||e[37]!==z?(u=j.jsx(c("MWXListCellPressable.react"),{addOnStart:a,content:y,onPress:z,selected:p,size:"large",testid:void 0}),e[34]=a,e[35]=p,e[36]=y,e[37]=z,e[38]=u):u=e[38];e[39]!==n||e[40]!==u?(v=j.jsx("div",babelHelpers["extends"]({},q,{ref:n,children:u})),e[39]=n,e[40]=u,e[41]=v):v=e[41];return v}g["default"]=a}),98);
__d("MWMessageSearchResults.react",["CometInfiniteScrollTrigger.react","MWInboxMessageSearchContext.react","MWInboxMessageSearchJumpToResultQPL","MWMessageSearchResultItem.react","MWMessageSearchStatusTypes","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(16),e=a.onSelect;a=a.status;var f=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext(),g=f.hasMore,h=f.loadMore;f=f.searchResults;a=a.searchStatus===d("MWMessageSearchStatusTypes").PrimarySearchStatus.IN_PROGRESS;if(b[0]!==e||b[1]!==f){var l;b[3]!==e?(l=function(a,b){var d;return i.jsx(c("MWMessageSearchResultItem.react"),{item:a,onSelect:e,position:b},(d=(d=a.messageId)!=null?d:a.messageOtid)!=null?d:b)},b[3]=e,b[4]=l):l=b[4];l=f.map(l);b[0]=e;b[1]=f;b[2]=l}else l=b[2];f=l;l=f;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=[],b[5]=f):f=b[5];j(k,f);b[6]!==l?(f=i.jsx("div",{"data-testid":void 0,children:l}),b[6]=l,b[7]=f):f=b[7];l=g!=null?g:!1;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx("div",{className:"xjm9jq1"}),b[8]=g):g=b[8];b[9]!==a||b[10]!==h||b[11]!==l?(g=i.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:l,isLoading:a,onLoadMore:h,children:g}),b[9]=a,b[10]=h,b[11]=l,b[12]=g):g=b[12];b[13]!==f||b[14]!==g?(a=i.jsxs(i.Fragment,{children:[f,g]}),b[13]=f,b[14]=g,b[15]=a):a=b[15];return a}function k(){return l}function l(){d("MWInboxMessageSearchJumpToResultQPL").endCancelIfAny("user_navigated_away_from_thread")}g["default"]=a}),98);
__d("useClearChatTabMessageSearch",["LSIntEnum","LSMessageSearchType","MAWThreadCutover","MWPConversationSearchContext.react","ReQL","nullthrows","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.useContext,k=(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE);function l(a,b,e,g){c("promiseDone")(a,function(a){return a.runInTransaction(async function(c){var f=await Promise.all([d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.message_search_results).getKeyRange(k,g,b)),e!=null?d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.message_search_results).getKeyRange(k,g,e)):Promise.resolve([])]),h=f[0];f=f[1];h=[].concat(h,f);await Promise.all(h.map(function(a){return c.message_search_results.delete(k,a.query,a.threadKey,a.globalIndex)}));await c.message_search_queries.delete(k,g,b);e!=null&&await c.message_search_queries.delete(k,g,e)},"readwrite",void 0,void 0,f.id+":37")})}function a(a){var b=d("react-compiler-runtime").c(7),e=c("useAsyncReStore")(),f=d("MAWThreadCutover").useCutoverOpenThread(a),g=j(d("MWPConversationSearchContext.react").context),h;b[0]!==g?(h=c("nullthrows")(g),b[0]=g,b[1]=h):h=b[1];g=h;var i=g.setSearch;b[2]!==e||b[3]!==(f==null?void 0:f.threadKey)||b[4]!==i||b[5]!==a?(h=function(b){i(),l(e,a,f==null?void 0:f.threadKey,b)},b[2]=e,b[3]=f==null?void 0:f.threadKey,b[4]=i,b[5]=a,b[6]=h):h=b[6];return h}g.default=a}),98);
__d("useMWInboxMessageSearchRestoreLoopLoadedUntilDate",["MAWBridgeSendAndReceive","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b){var c=d("react-compiler-runtime").c(4),e=j(null),f=e[0],g=e[1],h;c[0]!==b||c[1]!==a?(e=function(){g(null);var c=window.setInterval(async function(){var e=a==null?null:b==="media"?await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaRestoreNextTimestamp",{threadId:a},{isLoggingDisabled:!0}):await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchGetFTSNextTimestamp",{threadId:a},{isLoggingDisabled:!0});e=e!=null?parseInt(e,10):-1;g(e);e===0&&window.clearInterval(c)},300);return function(){window.clearInterval(c)}},h=[b,a],c[0]=b,c[1]=a,c[2]=e,c[3]=h):(e=c[2],h=c[3]);i(e,h);return f}g.default=a}),98);
__d("useMWInboxMessageSearchRestoreLoopAndStatus",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWMiActOnActThreadReadyDeferred","MWInboxMessageSearchContext.react","MWLSThreadDisplayContext","MWMessageSearchStatusTypes","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore","useMWInboxMessageSearchRestoreLoopLoadedUntilDate","useMWPConversatioSearchQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");b.useCallback;var k=b.useEffect,l=b.useState,m=c("requireDeferred")("MAWFTSRestoreSync").__setRef("useMWInboxMessageSearchRestoreLoopAndStatus");function n(a){if(a==null)return d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)))return d("MWMessageSearchStatusTypes").PrimarySearchStatus.IN_PROGRESS;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)))return d("MWMessageSearchStatusTypes").PrimarySearchStatus.COMPLETE;return(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").FAILED))?d("MWMessageSearchStatusTypes").PrimarySearchStatus.FAILED:d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED}function a(a,b){var e=d("react-compiler-runtime").c(28),f=a.threadKey,g;e[0]!==a.threadType?(g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),e[0]=a.threadType,e[1]=g):g=e[1];var h=g,i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();e[2]!==b?(a=b!=null?b:{},e[2]=b,e[3]=a):a=e[3];g=a;var j=g.shouldResetBeforeLoopStart;b=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext();var o=b.resultCount;a=b.searchResults;g=b.status;var p=a.length>0;e[4]!==g?(b=n(g),e[4]=g,e[5]=b):b=e[5];var q=b,r=c("useAsyncReStore")();a=l(null);g=a[0];var s=a[1];b=l(null);var t=b[0],u=b[1];a=c("useMWPConversatioSearchQPLLogger")();var v=a.qplSuccess,w=a.updateCurrentResultCount;e[6]!==r||e[7]!==i||e[8]!==h||e[9]!==j||e[10]!==f?(b=function(){var a=async function(){var a=await r;c("promiseDone")(c("MAWMiActOnActThreadReadyDeferred")(a,f,"MWInboxMessageSearchPanel.react",function(a,b){m.onReady(function(a){var d=a.getFTSRestoreSync;d().setActiveThreadId(b,i!=="ChatTab");a=j===!0?d().resetRestoreStatus():Promise.resolve();c("promiseDone")(a,function(){return d().startSyncingLoop()});u(d())});s(b);return Promise.resolve()}))};if(!h)return;c("promiseDone")(a())},a=[r,h,f,j,i],e[6]=r,e[7]=i,e[8]=h,e[9]=j,e[10]=f,e[11]=b,e[12]=a):(b=e[11],a=e[12]);d("Int64Hooks").useEffectInt64(b,a);e[13]!==t?(b=function(){t!=null&&(t.resetEBAvailability(),t.isStarted()||c("promiseDone")(t.startSyncingLoop()))},e[13]=t,e[14]=b):b=e[14];var x=b;a=c("useMWInboxMessageSearchRestoreLoopLoadedUntilDate")(g);bb0:{if(!h){b=d("MWMessageSearchStatusTypes").RestoreStatus.NOT_REQUIRED;break bb0}if(t==null||!(t!=null&&t.isStarted())||a==null){b=d("MWMessageSearchStatusTypes").RestoreStatus.NOT_RUNNING;break bb0}if(a===0){b=d("MWMessageSearchStatusTypes").RestoreStatus.COMPLETE;break bb0}b=d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS}var y=b;bb1:{if(q===d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED){g=d("MWMessageSearchStatusTypes").OverallStatus.NOT_STARTED;break bb1}if(y===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS){g=d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS;break bb1}if(q===d("MWMessageSearchStatusTypes").PrimarySearchStatus.IN_PROGRESS){g=d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS;break bb1}g=d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE}var z=g;e[15]!==z||e[16]!==v||e[17]!==o||e[18]!==w?(a=function(){z===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&(o!=null&&w(o),v())},b=[z,v,o,w],e[15]=z,e[16]=v,e[17]=o,e[18]=w,e[19]=a,e[20]=b):(a=e[19],b=e[20]);k(a,b);e[21]!==p||e[22]!==x||e[23]!==z||e[24]!==y||e[25]!==q?(g=function(){return{onEBOnboarded:x,status:{hasSomeResults:p,overallSearchStatus:z,restoreStatus:y,searchStatus:q}}},a=[x,z,y,p,q],e[21]=p,e[22]=x,e[23]=z,e[24]=y,e[25]=q,e[26]=g,e[27]=a):(g=e[26],a=e[27]);return d("Int64Hooks").useMemoInt64(g,a)}g.default=a}),98);
__d("useMWPStartConversationSearch",["Int64Hooks","LSClearMessageSearchTableStoredProcedure","LSFactory","LSIntEnum","LSIssueMessageSearchQueryStoredProcedure","LSMessageSearchType","MAWThreadCutover","MWLSThreadDisplayContext","MWPActor.react","MWPConversationSearchContext.react","MWPVisibleMessageContext.react","cr:1280","nullthrows","promiseDone","react","react-compiler-runtime","useMWPConversatioSearchQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useContext,l=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE);function a(a){var e=d("react-compiler-runtime").c(11),g=d("MWPActor.react").useActor(),i=(h||(h=c("useReStore")))(),j=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),o=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),p=o.setVisibleMessage,q=c("useMWPConversatioSearchQPLLogger")();o=k(d("MWPConversationSearchContext.react").context);var r;e[0]!==o?(r=c("nullthrows")(o),e[0]=o,e[1]=r):r=e[1];o=r;var s=o.setSearch;e[2]!==g||e[3]!==i||e[4]!==j||e[5]!==q||e[6]!==s||e[7]!==p||e[8]!==a?(r=function(e,h,k){var o=(k=k==null?void 0:k.clearMessageSearch)!=null?k:!0;s({query:e,selectedSearchResultIndex:0,threadKey:a});p(n);k=async function(){o&&await i.runInTransaction(m,"readwrite",void 0,void 0,f.id+":69"),q.qplStart({bool:{isInThread:!0,isSecure:h},string:{display_surface:j}}),h&&b("cr:1280")!=null?(c("promiseDone")(b("cr:1280").searchSecureDatabaseMessages(e,a,g,i,{flow:q,instanceKey:q.getCurrentInstanceKey()})),c("promiseDone")(d("MAWThreadCutover").getCutoverThreadBySecureThreadKey(a),function(a){a!=null&&a.showOpenMessageHistory===!0&&c("promiseDone")(i.runInTransaction(async function(b){await c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(b),{query:e,threadKey:a.openThreadId,type_:l})},"readwrite",void 0,void 0,f.id+":101"))})):c("promiseDone")(i.runInTransaction(async function(b){await c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(b),{query:e,threadKey:a,type_:l})},"readwrite",void 0,void 0,f.id+":117"))};c("promiseDone")(k())},o=[s,a,p,i,g,q,j],e[2]=g,e[3]=i,e[4]=j,e[5]=q,e[6]=s,e[7]=p,e[8]=a,e[9]=r,e[10]=o):(r=e[9],o=e[10]);e=d("Int64Hooks").useCallbackInt64(r,o);return e}async function m(a){await c("LSClearMessageSearchTableStoredProcedure")(c("LSFactory")(a),{type_:l})}function n(a){}g.default=a}),98);
__d("MWChatTabMessageSearchPage.react",["fbt","CometScrollView.react","LSMessagingThreadTypeUtil","Locale","MWMessageSearchEBRestoreStatusOrUpsell.react","MWMessageSearchInput.react","MWMessageSearchNullState.react","MWMessageSearchResults.react","MWMessageSearchStatusTypes","MWPVisibleMessageContext.react","MWV2HeaderContainer.react","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","MWXThreadThemeColor","qex","react","react-compiler-runtime","requireDeferred","useClearChatTabMessageSearch","useMWInboxMessageSearchRestoreLoopAndStatus","useMWPConversationSearch","useMWPStartConversationSearch","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useState,m=c("requireDeferred")("MAWFTSRestoreSync").__setRef("MWChatTabMessageSearchPage.react"),n={root:{height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(56),e=a.onReturn;a=a.thread;var f=a.threadKey,g=a.threadType,i=c("useMWPConversationSearch")(f),p=i.query,q=i.resultCount;i=i.searchResults;var r=l(p!=null?p:""),s=r[0];r=r[1];var t=c("useMWPStartConversationSearch")(f),u=c("useMWInboxMessageSearchRestoreLoopAndStatus")(a),v=u.onEBOnboarded,w=u.status,x=c("useClearChatTabMessageSearch")(f);u=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var y=u.setVisibleMessage;f=d("Locale").isRTL()?c("MWXIconArrowRight"):c("MWXIconArrowLeft");b[0]!==a.threadType?(u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[0]=a.threadType,b[1]=u):u=b[1];a=u;var z=c("usePrevious")(s);b[2]!==x||b[3]!==z||b[4]!==s||b[5]!==w?(u=function(){z!=null&&z!==s&&w.searchStatus!==d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED&&x(z)},b[2]=x,b[3]=z,b[4]=s,b[5]=w,b[6]=u):u=b[6];var A;b[7]!==x||b[8]!==z||b[9]!==s||b[10]!==i||b[11]!==w?(A=[z,s,i,w,x],b[7]=x,b[8]=z,b[9]=s,b[10]=i,b[11]=w,b[12]=A):A=b[12];k(u,A);b[13]!==x||b[14]!==e||b[15]!==s||b[16]!==y?(u=function(){var a;x(s);y(void 0);e();a=(a=c("qex")._("3141"))!=null?a:!1;a||m.onReady(o)},b[13]=x,b[14]=e,b[15]=s,b[16]=y,b[17]=u):u=b[17];A=u;b[18]!==s||b[19]!==t||b[20]!==g?(u=function(){t(s,d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),{clearMessageSearch:!1})},b[18]=s,b[19]=t,b[20]=g,b[21]=u):u=b[21];u=u;var B;b[22]===Symbol["for"]("react.memo_cache_sentinel")?(B=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),b[22]=B):B=b[22];var C;b[23]===Symbol["for"]("react.memo_cache_sentinel")?(C=h._(/*BTDS*/"Back"),b[23]=C):C=b[23];b[24]!==A?(B=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{color:B,icon:f,label:C,onPress:A,size:36,type:"deemphasized"})}),b[24]=A,b[25]=B):B=b[25];b[26]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",children:j.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:"headlineEmphasized4",children:h._(/*BTDS*/"Search")})}),b[26]=f):f=b[26];b[27]!==B?(C=j.jsx(c("MWXColumnItem.react"),{paddingTop:0,children:j.jsx(c("MWV2HeaderContainer.react"),{startContent:j.jsxs(c("MWXRow.react"),{paddingTop:0,spacingHorizontal:8,children:[B,f]})})}),b[27]=B,b[28]=C):C=b[28];b[29]!==u||b[30]!==e||b[31]!==s||b[32]!==q||b[33]!==w?(A=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWMessageSearchInput.react"),{onEscape:e,query:s,resultCount:q,search:u,setQuery:r,status:w})}),b[29]=u,b[30]=e,b[31]=s,b[32]=q,b[33]=w,b[34]=A):A=b[34];b[35]!==e||b[36]!==w?(f=j.jsx(c("MWMessageSearchResults.react"),{onSelect:e,status:w}),b[35]=e,b[36]=w,b[37]=f):f=b[37];b[38]!==a||b[39]!==p||b[40]!==s||b[41]!==i||b[42]!==w?(B=j.jsx(c("MWMessageSearchNullState.react"),{isSecureThread:a,query:p,queryInput:s,searchResults:i,status:w}),b[38]=a,b[39]=p,b[40]=s,b[41]=i,b[42]=w,b[43]=B):B=b[43];b[44]!==a||b[45]!==v||b[46]!==w?(r=a&&j.jsx(c("MWMessageSearchEBRestoreStatusOrUpsell.react"),{onEBOnboarded:v,status:w}),b[44]=a,b[45]=v,b[46]=w,b[47]=r):r=b[47];b[48]!==f||b[49]!==B||b[50]!==r?(u=j.jsx(c("MWXColumnItem.react"),{expanding:!0,children:j.jsxs(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[f,B,r]})}),b[48]=f,b[49]=B,b[50]=r,b[51]=u):u=b[51];b[52]!==C||b[53]!==A||b[54]!==u?(q=j.jsxs(c("MWXColumn.react"),{spacing:0,xstyle:n.root,children:[C,A,u]}),b[52]=C,b[53]=A,b[54]=u,b[55]=q):q=b[55];return q}function o(a){a=a.getFTSRestoreSync;a().setShouldPauseRestore(!0)}g["default"]=a}),226);
__d("MWChatTabWithMessageSearch.react",["BaseMultiStepContainer.react","MWPConversationSearchContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e=a.children;b[0]!==e?(a=i.jsx(d("MWPConversationSearchContext.react").MWPConversationSearchContext,{children:i.jsx(c("BaseMultiStepContainer.react"),{disableFocusContainment:!0,disableInitialAutoFocus:!0,expanding:!0,stopOnFocusWithinPropagation:!1,children:function(a){return e(a)}})}),b[0]=e,b[1]=a):a=b[1];return a}g["default"]=a}),98);
__d("usePushChatTabMessageSearchPage.react",["MWInboxMessageSearchContext.react","MWPConversationSearchLogger","MWV2TabContainer","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||c("react");(h||(h=d("react"))).useCallback;var k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatTabMessageSearchPage.react").__setRef("usePushChatTabMessageSearchPage.react"));function a(a,b,e){var f=d("react-compiler-runtime").c(4),g;f[0]!==e||f[1]!==b||f[2]!==a?(g=function(){e!=null&&(c("MWPConversationSearchLogger").logMessageSearchStart(a.threadKey,a.threadType),e(function(c){c=c.onReturn;return j.jsx(d("MWInboxMessageSearchContext.react").MWInboxMessageSearchContext,{thread:a,children:j.jsx(d("MWV2TabContainer").MWV2TabContainer,{style:{boxShadow:"none",margin:0},tab:b,threadKey:a.threadKey,children:j.jsx(k,{onReturn:c,thread:a})})})}))},f[0]=e,f[1]=b,f[2]=a,f[3]=g):g=f[3];return g}g["default"]=a}),98);
__d("MWLSChatTabBackToSearchButton.react",["fbt","Locale","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXThreadThemeColor","react","react-compiler-runtime","useMWPConversationSearch","usePushChatTabMessageSearchPage.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||c("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.pushPage,f=a.tab;a=a.thread;var g=a.threadKey;a=a.threadType;var i=c("useMWPConversationSearch")(g),k;b[0]!==g||b[1]!==a?(k={threadKey:g,threadType:a},b[0]=g,b[1]=a,b[2]=k):k=b[2];g=c("usePushChatTabMessageSearchPage.react")(k,f,e);if(i.searchResults.length===0)return null;a=d("Locale").isRTL()?c("MWXIconArrowRight"):c("MWXIconArrowLeft");b[3]===Symbol["for"]("react.memo_cache_sentinel")?(k=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),b[3]=k):k=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"Back"),b[4]=f):f=b[4];b[5]!==g?(e=j.jsx(c("MWXCircleButton.react"),{color:k,icon:a,label:f,onPress:g,size:36,type:"deemphasized"}),b[5]=g,b[6]=e):e=b[6];return e}g["default"]=a}),226);
__d("useMAWFTSResetEBAvailabilityOnEBOnboard",["LSMessagingThreadTypeUtil","MAWFTSSyncConsts","MWEBEntrypointsKillswitch.enum","promiseDone","react","react-compiler-runtime","requireDeferred","useMWEBBackupState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef,k=b.useState,l=c("requireDeferred")("MAWFTSRestoreSync").__setRef("useMAWFTSResetEBAvailabilityOnEBOnboard");function a(a){var b=d("react-compiler-runtime").c(10),e=j(null),f=k(!1),g=f[0],h=f[1];b[0]!==a.threadType?(f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[0]=a.threadType,b[1]=f):f=b[1];var l=f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={entrypoint:c("MWEBEntrypointsKillswitch.enum").NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE},b[2]=a):a=b[2];f=c("useMWEBBackupState")(a);var n=f===3;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){e.current=window.setTimeout(function(){return h(!0)},d("MAWFTSSyncConsts").THREAD_VIEW_DELAY_UNTIL_RESTORE);return function(){e.current!=null&&(window.clearTimeout(e.current),e.current=null)}},f=[],b[3]=a,b[4]=f):(a=b[3],f=b[4]);i(a,f);var o=m;b[5]!==g||b[6]!==n||b[7]!==l?(a=function(){l&&n&&g&&o()},f=[l,n,o,g],b[5]=g,b[6]=n,b[7]=l,b[8]=a,b[9]=f):(a=b[8],f=b[9]);i(a,f)}function m(){l.onReady(n)}function n(a){a=a.getFTSRestoreSync;a=a();a.resetEBAvailability();a.isStarted()||c("promiseDone")(a.startSyncingLoop())}g["default"]=a}),98);